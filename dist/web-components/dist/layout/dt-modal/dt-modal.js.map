{"version":3,"file":"dt-modal.js","sources":["../../../src/components/layout/dt-modal/dt-modal.js"],"sourcesContent":["import { html, css } from 'lit';\nimport { msg } from '@lit/localize';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport DtBase from '../../dt-base.js';\n\nexport class DtModal extends DtBase {\n  static get styles() {\n    return css`\n      :host {\n        display: block;\n        font-family: var(--font-family);\n      }\n      :host:has(dialog[open]) {\n        overflow: hidden;\n      }\n\n      .dt-modal {\n        display: block;\n        background: var(--dt-modal-background-color, #fff);\n        color: var(--dt-modal-color, #000);\n        max-inline-size: min(90dvw, 100%);\n        max-block-size: min(80dvh, 100%);\n        max-block-size: min(80dvb, 100%);\n        margin: auto;\n        height: fit-content;\n        padding: var(--dt-modal-padding, 1em);\n        position: fixed;\n        inset: 0;\n        border-radius: 1em;\n        border: none;\n        box-shadow: var(--shadow-6);\n        z-index: 1000;\n        transition: opacity 0.1s ease-in-out;\n      }\n      .dt-modal.dt-modal--width {\n        width: 80dvw;\n        background-color: #fefefe;\n        border: 1px solid #cacaca;\n        border-radius: 10px;\n      }\n      #modal-field-title {\n      font-size: 2rem;\n      }\n\n      dialog:not([open]) {\n        pointer-events: none;\n        opacity: 0;\n      }\n\n      dialog::backdrop {\n        background: var(--dt-modal-backdrop-color, rgba(0, 0, 0, 0.25));\n        animation: var(--dt-modal-animation, fade-in 0.75s);\n      }\n\n      @keyframes fade-in {\n        from {\n          opacity: 0;\n        }\n        to {\n          opacity: 1;\n        }\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        line-height: 1.4;\n        text-rendering: optimizeLegibility;\n        color: inherit;\n        font-style: normal;\n        font-weight: 300;\n        margin: 0;\n      }\n\n      form {\n        display: grid;\n        height: fit-content;\n        grid-template-columns: 1fr;\n        grid-template-rows: 2.5em auto 3em;\n        grid-template-areas:\n          'header'\n          'main'\n          'footer';\n        position: relative;\n      }\n\n      form.no-header {\n        grid-template-rows: auto auto;\n        grid-template-areas:\n          'main'\n          'footer';\n      }\n\n      header {\n        grid-area: header;\n        display: flex;\n        justify-content: space-between;\n      }\n\n      .button {\n        color: var(--dt-modal-button-color, #fff);\n        background: var(--dt-modal-button-background, #3f729b);\n        font-size: 1rem;\n        border: 0.1em solid var(--dt-modal-button-background, #000);\n        border-radius: 0.25em;\n        padding: 0.25rem 0.5rem;\n        cursor: pointer;\n        text-decoration: none;\n      }\n\n      .button.opener {\n        color: var(--dt-modal-button-opener-color,var(--dt-modal-button-color, #fff) );\n        background: var(--dt-modal-button-opener-background, var(--dt-modal-button-background, #3f729b) );\n        border: 0.1em solid var(--dt-modal-button-opener-background, #000);\n      }\n      button.toggle {\n        margin-inline-end: 0;\n        margin-inline-start: auto;\n        background: none;\n        border: none;\n        color: inherit;\n        cursor: pointer;\n        display: flex;\n        align-items: flex-start;\n      }\n\n      article {\n        grid-area: main;\n        overflow: auto;\n      }\n\n      footer {\n        grid-area: footer;\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        padding-block-start: 1rem;\n        border-top: 1px solid #ccc;\n      }\n\n      footer.footer-button{\n      justify-content: flex-start;\n\n      }\n\n      .help-more h5 {\n        font-size: 0.75rem;\n        display: block;\n      }\n      .help-more .button {\n        font-size: 0.75rem;\n        display: block;\n      }\n      .help-icon {\n        -webkit-filter: invert(69%) sepia(1%) saturate(0) hue-rotate(239deg) brightness(94%) contrast(86%);\n        filter: invert(69%) sepia(1%) saturate(0) hue-rotate(239deg) brightness(94%) contrast(86%);\n        height: 1rem;\n      }\n      .dt-modal.dt-modal--contact-type form {\n        grid-template-rows: 2.5em auto 4.5em;\n      .dt-modal.header-blue-bg {\n        padding: 0;\n      }\n      .dt-modal.header-blue-bg header {\n        background-color: #3f729b;\n        color: #fff;\n        text-align: center;\n        padding-top: .75rem;\n      }\n      .dt-modal.header-blue-bg header #modal-field-title {\n        font-size: 1.5rem;\n        width: 100%;\n      }\n      .dt-modal.header-blue-bg article {\n        padding: .75rem 0;\n      }\n      .dt-modal.header-blue-bg footer {\n        padding-inline: .7rem;\n        justify-content: flex-end;\n      }\n      .dt-modal.header-blue-bg footer .button {\n        padding: 12px 14px;\n      }\n      .dt-modal.header-blue-bg form {\n        grid-template-rows: 2.5em auto 3em;\n      }\n      .button img {\n        height: 1em;\n        width: 1em;\n      }\n      .footer-button {\n        display: flex;\n        gap: .5rem;\n      }\n      .footer-button .button {\n        min-height: 2.25rem;\n      }\n      .footer-button .button.small {\n        border-color: #3f729b;\n      }\n      .footer-button .button.small:hover {\n        color: #ffffff !important;\n        background-color: #38668c !important;\n      }\n      @media screen and (min-width: 40em) {\n          .dt-modal.dt-modal--full-width{\n            max-width: 80rem;\n            width: 90%;\n        }\n    }\n\n     ::slotted([slot=\"content\"]) {\n      /* Styles for the content inside the named slot */\n      font-size: 15px;;\n    }\n    `;\n  }\n\n  static get properties() {\n    return {\n      title: { type: String },\n      context: { type: String },\n      isHelp: { type: Boolean },\n      isOpen: { type: Boolean },\n      hideHeader: { type: Boolean },\n      hideButton: { type: Boolean },\n      buttonClass: { type: Object },\n      buttonStyle: { type: Object },\n      headerClass: { type: Object },\n      imageSrc: {type: String},\n      imageStyle: {type:Object},\n      tileLabel: {type:String},\n      buttonLabel:{type: String},\n      dropdownListImg: {type: String},\n      submitButton: {type:Boolean},\n      closeButton: {type:Boolean},\n    };\n  }\n\n  constructor() {\n    super();\n    this.context = 'default';\n    this.addEventListener('open', () => this._openModal());\n    this.addEventListener('close', () => this._closeModal());\n  }\n\n _openModal() {\n  this.isOpen = true;\n this.shadowRoot.querySelector('dialog').showModal();\n document.querySelector('body').style.overflow = \"hidden\"\n  }\n  // to format title coming from backend\n\n  get formattedTitle() {\n    if (!this.title) return '';\n    const formattedTitle = this.title.replace(/_/g, ' ');\n    return formattedTitle.charAt(0).toUpperCase() + formattedTitle.slice(1);\n  }\n\n  _dialogHeader(svg) {\n    if (!this.hideHeader) {\n      return html`\n      <header>\n            <h1 id=\"modal-field-title\" class=\"modal-header\">${this.formattedTitle}</h1>\n            <button @click=\"${this._cancelModal}\" class=\"toggle\">${svg}</button>\n          </header>\n      `;\n    }\n    return html``;\n  }\n\n  _closeModal() {\n    this.isOpen = false;\n    this.shadowRoot.querySelector('dialog').close();\n    document.querySelector('body').style.overflow = \"initial\"\n  }\n\n  _cancelModal() {\n    this._triggerClose('cancel');\n  }\n\n  _triggerClose(action) {\n    this.dispatchEvent(new CustomEvent('close', {\n      detail: {\n        action,\n      },\n    }));\n  }\n\n  _dialogClick(e) {\n    if (e.target.tagName !== 'DIALOG') {\n      // This prevents issues with forms\n      return;\n    }\n\n    // Close the modal if the user clicks outside of the modal\n    const rect = e.target.getBoundingClientRect();\n\n    const clickedInDialog =\n      rect.top <= e.clientY &&\n      e.clientY <= rect.top + rect.height &&\n      rect.left <= e.clientX &&\n      e.clientX <= rect.left + rect.width;\n\n    if (clickedInDialog === false) {\n      this._cancelModal();\n    }\n  }\n\n  _dialogKeypress(e) {\n    if (e.key === 'Escape') {\n      this._cancelModal();\n    }\n  }\n\n  _helpMore() {\n    return this.isHelp\n      ? html`\n          <div class=\"help-more\">\n            <h5>${msg('Need more help?')}</h5>\n            <a\n              class=\"button small\"\n              id=\"docslink\"\n              href=\"https://disciple.tools/user-docs\"\n              target=\"_blank\"\n              >${msg('Read the documentation')}</a\n            >\n          </div>\n        `\n      : null;\n  }\n\n  firstUpdated() {\n    if (this.isOpen) {\n      this._openModal();\n    }\n  }\n\n  _onButtonClick() {\n    this._triggerClose('button');\n  }\n\n  render() {\n    // prettier-ignore\n    const svg = html`\n      <svg viewPort=\"0 0 12 12\" version=\"1.1\" width='12' height='12'>\n          xmlns=\"http://www.w3.org/2000/svg\">\n        <line x1=\"1\" y1=\"11\"\n              x2=\"11\" y2=\"1\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"/>\n        <line x1=\"1\" y1=\"1\"\n              x2=\"11\" y2=\"11\"\n              stroke=\"currentColor\"\n              stroke-width=\"2\"/>\n      </svg>\n    `;\n    return html`\n      <dialog\n        id=\"\"\n        class=\"dt-modal dt-modal--width ${classMap(this.headerClass || {})}\"\n        @click=${this._dialogClick}\n        @keypress=${this._dialogKeypress}\n      >\n        <form method=\"dialog\" class=${this.hideHeader ? \"no-header\" : \"\"}>\n      ${this._dialogHeader(svg)}\n          <article>\n            <slot name=\"content\"></slot>\n          </article>\n          <footer>\n          <div class=footer-button>\n          ${this.closeButton ? html`\n            <button\n              class=\"button small\"\n              data-close=\"\"\n              aria-label=\"Close reveal\"\n              type=\"button\"\n              @click=${this._onButtonClick}\n            >\n              <slot name=\"close-button\">${msg('Close')}</slot>\n              </button>\n\n            `:''}\n              ${this.submitButton ? html`\n                <slot name=\"submit-button\"></span>\n\n                `:''}\n              </div>\n            ${this._helpMore()}\n          </footer>\n        </form>\n      </dialog>\n\n      ${!this.hideButton\n        ? html`\n      <button\n        class=\"button small opener ${classMap(this.buttonClass || {})}\"\n        data-open=\"\"\n        aria-label=\"Open reveal\"\n        type=\"button\"\n        @click=\"${this._openModal}\"\n        style=${styleMap(this.buttonStyle || {})}\n      >\n      ${this.dropdownListImg ? html`<img src=${this.dropdownListImg} alt=\"\" style=\"width = 15px; height : 15px\">`:''}\n      ${this.imageSrc\n            ? html`<img\n                   src=\"${this.imageSrc}\"\n                   alt=\"${this.buttonLabel} icon\"\n                   class=\"help-icon\"\n                   style=${styleMap(this.imageStyle || {})}\n                 />`\n            : ''}\n      ${this.buttonLabel\n            ? html`${this.buttonLabel}` : ''}\n      </button>\n      ` : null}\n    `;\n  }\n}\n\nwindow.customElements.define('dt-modal', DtModal);\n"],"names":["window","customElements","define","DtBase","styles","css","properties","title","type","String","context","isHelp","Boolean","isOpen","hideHeader","hideButton","buttonClass","Object","buttonStyle","headerClass","imageSrc","imageStyle","tileLabel","buttonLabel","dropdownListImg","submitButton","closeButton","constructor","super","this","addEventListener","_openModal","_closeModal","shadowRoot","querySelector","showModal","document","style","overflow","formattedTitle","replace","charAt","toUpperCase","slice","_dialogHeader","svg","html","_cancelModal","close","_triggerClose","action","dispatchEvent","CustomEvent","detail","_dialogClick","e","target","tagName","rect","getBoundingClientRect","top","clientY","height","left","clientX","width","_dialogKeypress","key","_helpMore","msg","firstUpdated","_onButtonClick","render","classMap","styleMap"],"mappings":"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"}