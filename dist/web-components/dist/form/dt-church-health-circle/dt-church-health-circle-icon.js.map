{"version":3,"file":"dt-church-health-circle-icon.js","sources":["../../../src/components/form/dt-church-health-circle/dt-church-health-circle-icon.js"],"sourcesContent":["import { css, html } from 'lit';\nimport { classMap } from 'lit/directives/class-map.js';\nimport DtBase from '../../dt-base.js';\n\nclass DtChurchHealthIcon extends DtBase {\n  static get styles() {\n    return css`\n      root {\n        display: block;\n      }\n      .health-item img {\n        width: var(--d);\n        height: var(--d);\n        filter: grayscale(1) opacity(0.75);\n      }\n      .health-item--active img {\n        filter: none !important;\n      }\n    `;\n  }\n\n  static get properties() {\n    return {\n      key: { type: String },\n      metric: { type: Object },\n      group: { type: Object },\n      active: { type: Boolean, reflect: true },\n      missingIcon: { type: String },\n      handleSave: { type: Function },\n    };\n  }\n\n  render() {\n    const {\n      metric,\n      active,\n      missingIcon = `${window.wpApiShare.template_dir}/dt-assets/images/groups/missing.svg`,\n    } = this;\n\n    return html`<div\n      class=${classMap({\n        'health-item': true,\n        'health-item--active': active,\n      })}\n      title=\"${metric.description}\"\n      @click=\"${this._handleClick}\"\n    >\n      <img src=\"${metric.icon ? metric.icon : missingIcon}\" />\n    </div>`;\n  }\n\n  async _handleClick() {\n    if (!this.handleSave) {\n      return;\n    }\n\n    const active = !this.active;\n    this.active = active;\n    const payload = {\n      health_metrics: {\n        values: [\n          {\n            value: this.key,\n            delete: !active,\n          },\n        ],\n      },\n    };\n\n    try {\n      await this.handleSave(this.group.ID, payload);\n    } catch (err) {\n      console.error(err);\n      return;\n    }\n\n    if (active) {\n      this.group.health_metrics.push(this.key);\n    } else {\n      this.group.health_metrics.pop(this.key);\n    }\n  }\n}\n\nwindow.customElements.define('dt-church-health-icon', DtChurchHealthIcon);\n"],"names":["window","customElements","define","DtBase","styles","css","properties","key","type","String","metric","Object","group","active","Boolean","reflect","missingIcon","handleSave","Function","render","wpApiShare","template_dir","this","html","classMap","description","_handleClick","icon","async","payload","health_metrics","values","value","delete","ID","err","console","error","push","pop"],"mappings":"yNAoFAA,OAAOC,eAAeC,OAAO,wBAhF7B,cAAiCC,EACpBC,oBACT,OAAOC,CAAG,qJAaX,CAEUC,wBACT,MAAO,CACLC,IAAK,CAAEC,KAAMC,QACbC,OAAQ,CAAEF,KAAMG,QAChBC,MAAO,CAAEJ,KAAMG,QACfE,OAAQ,CAAEL,KAAMM,QAASC,SAAS,GAClCC,YAAa,CAAER,KAAMC,QACrBQ,WAAY,CAAET,KAAMU,UAEvB,CAEDC,SACE,MAAMT,OACJA,EAAMG,OACNA,EAAMG,YACNA,EAAc,GAAGhB,OAAOoB,WAAWC,oDACjCC,KAEJ,OAAOC,CAAI,eACDC,EAAS,CACf,eAAe,EACf,sBAAuBX,eAEhBH,EAAOe,wBACNH,KAAKI,2BAEHhB,EAAOiB,KAAOjB,EAAOiB,KAAOX,WAE3C,CAEDY,qBACE,IAAKN,KAAKL,WACR,OAGF,MAAMJ,GAAUS,KAAKT,OACrBS,KAAKT,OAASA,EACd,MAAMgB,EAAU,CACdC,eAAgB,CACdC,OAAQ,CACN,CACEC,MAAOV,KAAKf,IACZ0B,QAASpB,MAMjB,UACQS,KAAKL,WAAWK,KAAKV,MAAMsB,GAAIL,EAItC,CAHC,MAAOM,GAEP,YADAC,QAAQC,MAAMF,EAEf,CAEGtB,EACFS,KAAKV,MAAMkB,eAAeQ,KAAKhB,KAAKf,KAEpCe,KAAKV,MAAMkB,eAAeS,IAAIjB,KAAKf,IAEtC"}